{
  "name": "corista-openstack-network",
  "description": "Attributes for network node",
  "cookbook_versions": {
  },
  "json_class": "Chef::Environment",
  "chef_type": "environment",
  "default_attributes": {
    "apache": {
      "listen": []
    },
    "apt": {
      "compile_time_update" : true
    },
    "corista-openstack": {
      "interfaces": {
        "br-ex": {
          "type": "inet static",
          "options": [
            "address 192.168.200.20",
            "netmask 255.255.255.0",
            "gateway 192.168.200.1",
            "dns-nameservers 8.8.8.8",
            "bridge_ports enp4s0",
            "bridge_stp off",
            "bridge_fd 0",
            "bridge_maxwait 0"
          ]
        },
        "enp3s0.201": {
          "type": "inet manual",
          "options": [
            "vlan-raw-device enp3s0"
          ]
        },
        "br-mgmt": {
          "type": "inet static",
          "options": [
            "address 192.168.201.20",
            "netmask 255.255.255.0",
            "bridge_ports enp3s0.201",
            "bridge_stp off",
            "bridge_fd 0",
            "bridge_maxwait 0"
          ]
        },
        "enp5s0.202": {
          "type": "inet manual",
          "options": [
            "vlan-raw-device enp5s0"
          ]
        },
        "br-overlay": {
          "type": "inet static",
          "options": [
            "address 192.168.202.20",
            "netmask 255.255.255.0",
            "bridge_ports enp5s0.202",
            "bridge_stp off",
            "bridge_fd 0",
            "bridge_maxwait 0"
          ]
        }
      }
    }
  },
  "override_attributes": {
    "openstack": {
      "region": "Somerville",
      "apt": {
        "update_apt_cache": true
      },
      "sysctl": {
        "net.ipv4.ip_forward": 1
      },
      "secret": {
        "key_path": "/opt/corista/openstack-chef-repo/.chef/encrypted_data_bag_secret"
      },
      "network": {
        "plugins": {
          "ml2": {
            "conf": {
              "ml2_type_vxlan": {
                "vni_ranges": "65537:69999",
                "vxlan_group": "239.1.1.40"
              }
            }
          }
        },
        "tun_network_bridge_interface": "br-overlay",
        "conf": {
          "DEFAULT": {
            "service_plugins": "router"
          },
          "oslo_messaging_rabbit": { "rabbit_host": "192.168.200.10" },
          "ml2": { "tenant_network_types": "vxlan" }
        }
      },
      "network_l3" : {
        "external_network_bridge_interface": "br-ex"
      },
      "bind_service": {
        "network": "0.0.0.0",
        "main": {
          "network": "0.0.0.0"
        },
        "admin": {
          "network": "0.0.0.0"
        },
        "internal": {
          "network": "0.0.0.0"
        },
        "public": {
          "network": "0.0.0.0"
        },
        "all": {
          "network": "0.0.0.0"
        }
      },
      "endpoints": {
        "db": { "host": "192.168.201.10" },
        "mq": { "host": "192.168.201.10" },
        "network": { "host": "192.168.201.10" },
        "main": {
          "identity": { "host": "192.168.200.10" },
          "image_api": { "host": "192.168.200.10" },
          "network": { "host": "192.168.200.10" }
        },
        "admin": {
          "identity": { "host": "192.168.200.10" },
          "image_api": { "host": "192.168.200.10" },
          "network": { "host": "192.168.200.10" }
        },
        "internal": {
          "identity": { "host": "192.168.201.10" },
          "image_api": { "host": "192.168.201.10" },
          "network": { "host": "192.168.201.10" }
        },
        "public": {
          "identity": { "host": "192.168.200.10" },
          "image_api": { "host": "192.168.200.10" },
          "network": { "host": "192.168.200.10" }
        }
      }
    }
  }
}
